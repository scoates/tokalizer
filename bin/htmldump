#!/Users/sean/bin/php
<?php

require dirname(__FILE__) . '/../include/TokenSet.class.php';
require dirname(__FILE__) . '/../include/Output/HtmlTokenOutput.class.php';

$ts = TokenSet::fromFile($_SERVER['argv'][1]);
$ts->parse();
$ts->setOutputStyle(TokenOutput::STYLE_HTML);

?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv='content-type' content='text/html; charset=UTF-8'/>
        <title>Tokalizer Output</title>
    </head>
    <body>
        <style type="text/css">
        a.token:hover {
            background-color: yellow;
        }
        div.tokalizer-linenumbers,
        div.tokalizer-tokens {
            font-family: monospace;
            float: left;
        }
        
        div.tokalizer-tokens {
            overflow: auto;
        }
        </style>
        <script type="text/javascript">
        function highlight_tokens(toggle, tokenid) {
            var t = document.getElementById(tokenid);
            var bg = (toggle ? 'orange' : null);
            t.style.backgroundColor = bg;
        }
        </script>
        <div class="tokalizer-linenumbers"><?php
            for ($n=1; $n < $ts->getNumLines(); $n++) {
                echo '<span id="token-line-' . $n .'">';
                echo $n;
                echo '</span><br />';
            }
        ?></div>
        <div class="tokalizer-tokens">
            <?php echo $ts->reconstruct(); ?>
        </div>
    </body>
</html>